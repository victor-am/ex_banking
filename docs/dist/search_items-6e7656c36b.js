searchNodes=[{"doc":"The ExBanking module serves as an entrypoint for the application, it&#39;s APIs are the only things meant to be directly exposed to the outside world. It&#39;s a very thin layer of the application, mostly just calling Account module methods instead of doing much on it&#39;s own.","ref":"ExBanking.html","title":"ExBanking","type":"module"},{"doc":"Creates a new user with a given name (case-sensitive string), unless there is already an user with the same name. Returns :ok Examples iex&gt; ExBanking.create_user(&quot;John&quot;) :ok iex&gt; ExBanking.create_user(&quot;Robert&quot;) ...&gt; ExBanking.create_user(&quot;Robert&quot;) {:error, :user_already_exists}","ref":"ExBanking.html#create_user/1","title":"ExBanking.create_user/1","type":"function"},{"doc":"Adds the given amount of money from the given currency to the specified user account. Returns {:ok, balance} Examples iex&gt; ExBanking.create_user(&quot;Evan&quot;) ...&gt; ExBanking.deposit(&quot;Evan&quot;, 10.42, &quot;USD&quot;) {:ok, 10.42} iex&gt; ExBanking.deposit(&quot;Santa Claus&quot;, 10.50, &quot;USD&quot;) {:error, :user_does_not_exist}","ref":"ExBanking.html#deposit/3","title":"ExBanking.deposit/3","type":"function"},{"doc":"Gets the current amount of money a user has on the given currency. Returns {:ok, balance} Examples iex&gt; ExBanking.create_user(&quot;Elton&quot;) ...&gt; ExBanking.get_balance(&quot;Elton&quot;, &quot;USD&quot;) {:ok, 0.00} iex&gt; ExBanking.get_balance(&quot;Santa Claus&quot;, &quot;USD&quot;) {:error, :user_does_not_exist}","ref":"ExBanking.html#get_balance/2","title":"ExBanking.get_balance/2","type":"function"},{"doc":"Transfers an amount of money of a given currency from one user account to another. Returns {:ok, sender_balance, receiver_balance} Examples iex&gt; ExBanking.create_user(&quot;Jose&quot;) ...&gt; ExBanking.create_user(&quot;Amelia&quot;) ...&gt; ExBanking.deposit(&quot;Jose&quot;, 150.0, &quot;USD&quot;) ...&gt; ExBanking.send(&quot;Jose&quot;, &quot;Amelia&quot;, 50.0, &quot;USD&quot;) {:ok, 100.0, 50.0}","ref":"ExBanking.html#send/4","title":"ExBanking.send/4","type":"function"},{"doc":"Removes the given amount of money from the given currency from the specified user account. Returns {:ok, balance} Examples iex&gt; ExBanking.create_user(&quot;Terry&quot;) ...&gt; ExBanking.deposit(&quot;Terry&quot;, 150.50, &quot;USD&quot;) ...&gt; ExBanking.withdraw(&quot;Terry&quot;, 25.50, &quot;USD&quot;) {:ok, 125.0} iex&gt; ExBanking.withdraw(&quot;Santa Claus&quot;, 10.50, &quot;USD&quot;) {:error, :user_does_not_exist}","ref":"ExBanking.html#withdraw/3","title":"ExBanking.withdraw/3","type":"function"},{"doc":"","ref":"ExBanking.html#t:banking_error/0","title":"ExBanking.banking_error/0","type":"type"},{"doc":"The Account module is responsible for handling interactions between the ExBanking functions and the GenServer implemented in AccountServer. It handles some business logic while also translating the low-level messages from AccountServer to business messages that ExBanking can actually return.","ref":"ExBanking.Account.html","title":"ExBanking.Account","type":"module"},{"doc":"Creates a new AccountServer process using the given name (case-sensitive string), unless there is already a process using the same user name. Returns :ok Examples iex&gt; Account.create_user(&quot;Anna&quot;) :ok iex&gt; Account.create_user(&quot;Olivia&quot;) ...&gt; Account.create_user(&quot;Olivia&quot;) {:error, :user_already_exists}","ref":"ExBanking.Account.html#create_user/1","title":"ExBanking.Account.create_user/1","type":"function"},{"doc":"Adds the given amount of money from the given currency to the specified user account. Returns {:ok, balance} Examples iex&gt; Account.create_user(&quot;Susan&quot;) ...&gt; Account.deposit(&quot;Susan&quot;, 1042, &quot;USD&quot;) {:ok, 1042} iex&gt; Account.deposit(&quot;Santa Claus&quot;, 1050, &quot;USD&quot;) {:error, :user_does_not_exist}","ref":"ExBanking.Account.html#deposit/4","title":"ExBanking.Account.deposit/4","type":"function"},{"doc":"Gets the current amount of money a user has on the given currency. Returns {:ok, balance} Examples iex&gt; Account.create_user(&quot;Tod&quot;) iex&gt; Account.get_balance(&quot;Tod&quot;, &quot;USD&quot;) {:ok, 0} iex&gt; Account.get_balance(&quot;Santa Claus&quot;, &quot;USD&quot;) {:error, :user_does_not_exist}","ref":"ExBanking.Account.html#get_balance/3","title":"ExBanking.Account.get_balance/3","type":"function"},{"doc":"Transfers an amount of money of a given currency from one user account to another. It basically runs a withdraw followed by a deposit, handling any rollback in case a operation fails. Returns {:ok, sender_balance, receiver_balance} Examples iex&gt; Account.create_user(&quot;Denis&quot;) ...&gt; Account.create_user(&quot;Camila&quot;) ...&gt; Account.deposit(&quot;Denis&quot;, 150, &quot;USD&quot;) ...&gt; Account.send(&quot;Denis&quot;, &quot;Camila&quot;, 50, &quot;USD&quot;) {:ok, 100, 50}","ref":"ExBanking.Account.html#send/5","title":"ExBanking.Account.send/5","type":"function"},{"doc":"Removes the given amount of money from the given currency from the specified user account. Returns {:ok, balance} Examples iex&gt; Account.create_user(&quot;Marco&quot;) ...&gt; Account.deposit(&quot;Marco&quot;, 100, &quot;USD&quot;) ...&gt; Account.withdraw(&quot;Marco&quot;, 50, &quot;USD&quot;) {:ok, 50} iex&gt; Account.withdraw(&quot;Santa Claus&quot;, 1050, &quot;USD&quot;) {:error, :user_does_not_exist}","ref":"ExBanking.Account.html#withdraw/4","title":"ExBanking.Account.withdraw/4","type":"function"},{"doc":"The AccountServer module is a GenServer that is responsible for one user account at a time (multiple of them are spawned under the AccountsSupervisor). It handles most of the concurrency-dependent code and is in a considerably lower-level than the Account module for example.","ref":"ExBanking.AccountServer.html","title":"ExBanking.AccountServer","type":"module"},{"doc":"Calls the AccountServer process of the given user and returns whatever the the process returns from the given message. Examples iex&gt; AccountServer.spawn_account(&quot;Lara&quot;) ...&gt; AccountServer.call(&quot;Lara&quot;, {:get_balance, &quot;USD&quot;}) {:ok, 0} iex&gt; AccountServer.spawn_account(&quot;Francis&quot;) ...&gt; AccountServer.call(&quot;Francis&quot;, {:deposit, 100, &quot;USD&quot;}) {:ok, 100} iex&gt; AccountServer.spawn_account(&quot;Jeff&quot;) ...&gt; AccountServer.call(&quot;Jeff&quot;, {:deposit, 100, &quot;USD&quot;}) ...&gt; AccountServer.call(&quot;Jeff&quot;, {:withdraw, 10, &quot;USD&quot;}) {:ok, 90}","ref":"ExBanking.AccountServer.html#call/3","title":"ExBanking.AccountServer.call/3","type":"function"},{"doc":"Returns a specification to start this module under a supervisor. See Supervisor.","ref":"ExBanking.AccountServer.html#child_spec/1","title":"ExBanking.AccountServer.child_spec/1","type":"function"},{"doc":"Callback from GenServer implementing the withdraw logic. Examples on the AccountServer.call function documentation.","ref":"ExBanking.AccountServer.html#handle_call/3","title":"ExBanking.AccountServer.handle_call/3","type":"function"},{"doc":"Spawns a new AccountServer GenServer under the AccountsSupervisor. Returns {:ok, #PID&lt;...&gt;} Examples iex&gt; {:ok, pid} = AccountServer.spawn_account(&quot;Sophie&quot;) ...&gt; is_pid(pid) true iex&gt; AccountServer.spawn_account(&quot;Mary&quot;) ...&gt; {:error, {:already_started, pid}} = ExBanking.AccountServer.spawn_account(&quot;Mary&quot;) ...&gt; is_pid(pid) true","ref":"ExBanking.AccountServer.html#spawn_account/1","title":"ExBanking.AccountServer.spawn_account/1","type":"function"},{"doc":"","ref":"ExBanking.AccountServer.html#start_link/1","title":"ExBanking.AccountServer.start_link/1","type":"function"},{"doc":"The functions inside this module are used to convert money between integer and 2 decimal places float formats.","ref":"ExBanking.Money.html","title":"ExBanking.Money","type":"module"},{"doc":"","ref":"ExBanking.Money.html#to_float/1","title":"ExBanking.Money.to_float/1","type":"function"},{"doc":"","ref":"ExBanking.Money.html#to_integer/1","title":"ExBanking.Money.to_integer/1","type":"function"},{"doc":"ExBanking ExBanking is an application that can keep track of money of different currencies for various users. This is an example of the supervision tree for an app running with 4 accounts (Anna, Aron, John and Marina). The code documentation can be found here","ref":"readme.html","title":"ExBanking","type":"extras"},{"doc":"ExBanking The ExBanking module serves as the entrypoint for the application and the module responsible for presentation issues (like converting money between different formats), and it&#39;s APIs are the only things meant to be directly exposed to the outside world. It&#39;s a very thin layer of the application, apart from input validation and some data transformation it mostly just calls Account module methods to perform the actual operations. Account The Account module is responsible for handling interactions between the ExBanking functions and the GenServer implemented in AccountServer. It handles some business logic while also translating the low-level messages from AccountServer to business messages that ExBanking can actually return. AccountServer The AccountServer module is a GenServer that is responsible for one user account at a time (multiple of them are spawned under the AccountsSupervisor). It handles most of the concurrency-dependent code and is in a considerably lower-level than the Account module for example. Money The functions inside this module are used to convert money between integer and 2 decimal places float formats. More information can be found about this can be found here.","ref":"readme.html#modules","title":"ExBanking - Modules","type":"extras"},{"doc":"There is some reasoning about the choices I&#39;ve made both in the commit messages and in the code documentation, but I think it&#39;s worth to delve a bit more into the most interesting ones: One account per process One account per process allow us to isolate fails between accounts, so if something happen to a customer, the rest should be safe. The only touchpoint between accounts is the send operation, that was implemented taking into consideration some failure possiblities and a rollback strategy in case anything goes wrong. Handling money Since I wasn&#39;t sure if just using Integers with the last two digits counting as decimals would be enough to satisfy the app requirements of money with 2 decimal places, I&#39;ve made money handling module (called... you guessed it! Money) that takes care of float/integer conversion. The app works on the premise that if money is inputed as a float the decimal places are the cents, otherwise it asumes there are no cents. Ex: 100 = 100.00 100.10 = 100.10 Internally though, the app converts the input to integer (multiplying by 100 to keep the decimal places) as it&#39;s a far safer format for money than float. Then on the output the app converts the integer back into a float to keep consistency. The 10 operation queue limit (1c178b) The limit was implemented in a most simplistic way (using Process.info which isn&#39;t very well meant for production code). The other option I considered would be to handle the queue manually through code, but this would raise a lot the complexity of the code for not that much gain. In a real life scenario though, I would prefer a deadline mechanism (timeout messages in the queue based on time elapsed) to a message count one. I think limiting the queue through time could prove more flexible as it could better accomodate functions with very different execution times.","ref":"readme.html#design-choices","title":"ExBanking - Design choices","type":"extras"}]